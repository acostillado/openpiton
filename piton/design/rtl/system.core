CAPI=2:
name: openpiton::system:0.1
description: OpenPiton System

filesets:
    rtl:
        files:
            - system.v
        depend:
            - openpiton::chip
            - openpiton::chipset
            - tool_vivado? (openpiton::xilinx_system_constraints)
        file_type: verilogSource-2001

    s10gx:
        files:
            - ../intel/s10gx/system.tcl : {file_type : tclSource}
            - ../intel/s10gx/system.sdc : {file_type : SDC}
            - ../intel/s10gx/clk_mmcm.qsys : {file_type : QSYS}
            - ../intel/s10gx/ip/clk_mmcm/clk_mmcm_clock_in.ip : {file_type : IP}
            - ../intel/s10gx/uart.qsys : {file_type : QSYS}
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0.ip : {file_type : IP}
            - ../intel/s10gx/ip/uart/uart_axi_bridge_0.ip : {file_type : IP}
            - ../intel/s10gx/ip/uart/uart_clock_in.ip : {file_type : IP}
            - ../intel/s10gx/ip/uart/uart_reset_in.ip : {file_type : IP}

    s10gx_vcs_ip:
        files:
            - ../intel/s10gx/clk_mmcm/sim/clk_mmcm.v : {file_type : verilogSource}
            - ../intel/s10gx/ip/clk_mmcm/clk_mmcm_clock_in/sim/clk_mmcm_clock_in.v : {file_type : verilogSource}
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/sim/uart_a_16550_uart_0.v : {file_type : verilogSource}
            - ../intel/s10gx/ip/uart/uart_axi_bridge_0/sim/uart_axi_bridge_0.v : {file_type : verilogSource}
            - ../intel/s10gx/ip/uart/uart_clock_in/sim/uart_clock_in.v : {file_type : verilogSource}
            - ../intel/s10gx/ip/uart/uart_reset_in/sim/uart_reset_in.v : {file_type : verilogSource}
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altera_16550_uart.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_bit_timer.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_clkgen.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_csr.v
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_csrext.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_data_cnt.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_databuffer.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_dmaintf.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_fifo.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_fifomem.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_interrupt.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_modem.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_rx_shift.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_rx_sync.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_rxfc.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_rxfsm.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_rxin.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_rxstor.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_rxswfc.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_sync.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_tx_shift.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_txfc.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_txfsm.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_txout.sv
            - ../intel/s10gx/ip/uart/uart_a_16550_uart_0/altera_16550_uart_1912/sim/synopsys/altr_uart_txstor.sv
            - ../intel/s10gx/uart/sim/uart.v : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_avalon_sc_fifo_1931/sim/uart_altera_avalon_sc_fifo_1931_vhmcgqy.v : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_axi_master_ni_1940/sim/altera_merlin_address_alignment.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_axi_master_ni_1940/sim/uart_altera_merlin_axi_master_ni_1940_xmlitzq.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_demultiplexer_1921/sim/uart_altera_merlin_demultiplexer_1921_ekfzhji.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_demultiplexer_1921/sim/uart_altera_merlin_demultiplexer_1921_xu5xrea.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_multiplexer_1921/sim/altera_merlin_arbitrator.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_multiplexer_1921/sim/uart_altera_merlin_multiplexer_1921_cz47psq.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_multiplexer_1921/sim/uart_altera_merlin_multiplexer_1921_qjqmo2a.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_router_1921/sim/uart_altera_merlin_router_1921_wu6uqgi.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_router_1921/sim/uart_altera_merlin_router_1921_zjyjhoa.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_slave_agent_191/sim/altera_merlin_burst_uncompressor.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_slave_agent_191/sim/uart_altera_merlin_slave_agent_191_ncfkfri.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_merlin_slave_translator_191/sim/uart_altera_merlin_slave_translator_191_x56fcki.sv : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_mm_interconnect_1920/sim/uart_altera_mm_interconnect_1920_ppouvcq.v : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_reset_controller_1921/sim/altera_reset_controller.v : {file_type : verilogSource}
            - ../intel/s10gx/uart/altera_reset_controller_1921/sim/altera_reset_synchronizer.v : {file_type : verilogSource}

targets:
    default:
        filesets: [rtl]
    pickle:
        default_tool: icarus
        filesets: [rtl]
        toplevel: [system]
        tools:
            icarus:
                iverilog_options: [-g 2001 -E]
    verify:
        default_tool: icarus
        filesets: [rtl]
        toplevel: [system]
        tools:
            icarus:
                iverilog_options: [-g 2001]

    fpga_template: &fpga_template
        default_tool: vivado
        filesets: [rtl]
        toplevel: [system]
        parameters:
            - NO_SCAN=true
            - FPGA_SYN=true
            - PITON_FPGA_SYNTH=true
            - PITON_PROTO=true
            - ost1? (PITON_OST1=true)
            - ariane? (PITON_ARIANE=true)
            - ariane? (WT_DCACHE=true)
            - PITON_FULL_SYSTEM=true
            - PITON_FPGA_NO_DMBR=true
            - MERGE_L1_DCACHE=true
            - FPGA_SYN_1THREAD=true
            - FPGA_FORCE_SRAM_ICACHE_TAG=true
            - FPGA_FORCE_SRAM_LSU_ICACHE=true
            - FPGA_FORCE_SRAM_DCACHE_TAG=true
            - FPGA_FORCE_SRAM_LSU_DCACHE=true
            - FPGA_FORCE_SRAM_RF16X160=true
            - FPGA_FORCE_SRAM_RF32X80=true
            - CONFIG_DISABLE_BIST_CLEAR=true
            - ariane? (NO_RTL_CSM=true)
            - PITON_FPGA_MC_DDR3=true
            - PITONSYS_MEM_ZEROER=true
            - PITON_FPGA_SD_BOOT=true
            - PITONSYS_UART_BOOT=true
            - PITON_NO_CHIP_BRIDGE=true
            - PITON_UART16550=true

    genesys2:
        # Copy all key/value pairs from the "fpga_template" target.
        <<: *fpga_template
        tools:
            vivado:
                part: xc7k325tffg900-2
        parameters_append:
            - GENESYS2_BOARD=true

    nexysVideo:
        # Copy all key/value pairs from the "fpga_template" target.
        <<: *fpga_template
        tools:
            vivado:
                part: xc7a200tsbg484-1
        parameters_append:
            - NEXYSVIDEO_BOARD=true

    vc707:
        # Copy all key/value pairs from the "fpga_template" target.
        <<: *fpga_template
        tools:
            vivado:
                part: xc7vx485tffg1761-2
        parameters_append:
            - VC707_BOARD=true

    vcu118:
        # Copy all key/value pairs from the "fpga_template" target.
        <<: *fpga_template
        tools:
            vivado:
                part: xcvu9p-flga2104-2L-e
        parameters_append:
            - VCU118_BOARD=true

    xupp3r:
        # Copy all key/value pairs from the "fpga_template" target.
        <<: *fpga_template
        tools:
            vivado:
                part: xcvu9p-flgb2104-2-e
        parameters_append:
            - XUPP3R_BOARD=true

    f1:
        # Copy all key/value pairs from the "fpga_template" target.
        <<: *fpga_template
        tools:
            vivado:
                part: f1? (xcvu9p-flgb2104-2-i)
        parameters_append:
            - F1_BOARD=true

    s10gx:
        default_tool: quartus
        description: Intel Stratix 10 GX Development Kit
        filesets:
          - rtl
          - tool_quartus? (s10gx)
          - tool_vcs? (s10gx_vcs_ip)
        toplevel: [system]
        tools:
          quartus:
            family : Stratix 10
            device : 1SG280LU2F50E2VG
          vcs:
              vcs_options:
                  - -Wl,--no-as-needed
                  - +nospecify
                  - -Xstrict=1
                  - -notice
                  - -timescale=1ps/1ps
                  - +rad
                  - -sverilog
                  - +systemverilogext+.sv
                  - -ntb_opts uvm-1.1 +vpi
                  - +lint=all,noVCDE,noVNGS,noPCTIO-L,noPCTIO
                  - +warn=all
                  - -l compile.log
        parameters:
            - NO_SCAN=true
            - FPGA_SYN=true
            - PITON_FPGA_SYNTH=true
            - PITON_PROTO=true
            - ost1? (PITON_OST1=true)
            - ariane? (PITON_ARIANE=true)
            - ariane? (WT_DCACHE=true)
            - PITON_FULL_SYSTEM=true
            - PITON_FPGA_NO_DMBR=true
            - MERGE_L1_DCACHE=true
            - FPGA_SYN_1THREAD=true
            - FPGA_FORCE_SRAM_ICACHE_TAG=true
            - FPGA_FORCE_SRAM_LSU_ICACHE=true
            - FPGA_FORCE_SRAM_DCACHE_TAG=true
            - FPGA_FORCE_SRAM_LSU_DCACHE=true
            - FPGA_FORCE_SRAM_RF16X160=true
            - FPGA_FORCE_SRAM_RF32X80=true
            - CONFIG_DISABLE_BIST_CLEAR=true
            - ariane? (NO_RTL_CSM=true)
            - PITON_NO_CHIP_BRIDGE=true
            - INTEL_S10GX_BOARD=true
            - PITON_UART16550=true
            - PITON_FPGA_BRAM_BOOT=true
            - PITONSYS_NO_MC=true

parameters:
    NO_SCAN:
        datatype: bool
        default: true
        paramtype: vlogdefine
    FPGA_SYN:
        datatype: bool
        paramtype: vlogdefine
    PITON_FPGA_SYNTH:
        datatype: bool
        paramtype: vlogdefine
    PITON_PROTO:
        datatype: bool
        paramtype: vlogdefine
    PITON_OST1:
        datatype: bool
        paramtype: vlogdefine
    PITON_ARIANE:
        datatype: bool
        paramtype: vlogdefine
    WT_DCACHE:
        datatype: bool
        paramtype: vlogdefine
    PITON_FULL_SYSTEM:
        datatype: bool
        paramtype: vlogdefine
    PITON_FPGA_NO_DMBR:
        datatype: bool
        paramtype: vlogdefine
    MERGE_L1_DCACHE:
        datatype: bool
        paramtype: vlogdefine
    FPGA_SYN_1THREAD:
        datatype: bool
        paramtype: vlogdefine
    FPGA_FORCE_SRAM_ICACHE_TAG:
        datatype: bool
        paramtype: vlogdefine
    FPGA_FORCE_SRAM_LSU_ICACHE:
        datatype: bool
        paramtype: vlogdefine
    FPGA_FORCE_SRAM_DCACHE_TAG:
        datatype: bool
        paramtype: vlogdefine
    FPGA_FORCE_SRAM_LSU_DCACHE:
        datatype: bool
        paramtype: vlogdefine
    FPGA_FORCE_SRAM_RF16X160:
        datatype: bool
        paramtype: vlogdefine
    FPGA_FORCE_SRAM_RF32X80:
        datatype: bool
        paramtype: vlogdefine
    CONFIG_DISABLE_BIST_CLEAR:
        datatype: bool
        paramtype: vlogdefine
    NO_RTL_CSM:
        datatype: bool
        paramtype: vlogdefine
    PITONSYS_NO_MC:
        datatype: bool
        paramtype: vlogdefine
    PITON_FPGA_MC_DDR3:
        datatype: bool
        paramtype: vlogdefine
    PITON_FPGA_BRAM_BOOT:
        datatype: bool
        paramtype: vlogdefine
    PITONSYS_MEM_ZEROER:
        datatype: bool
        paramtype: vlogdefine
    PITON_FPGA_SD_BOOT:
        datatype: bool
        paramtype: vlogdefine
    PITONSYS_UART_BOOT:
        datatype: bool
        paramtype: vlogdefine
    PITON_NO_CHIP_BRIDGE:
        datatype: bool
        paramtype: vlogdefine
    PITON_UART16550:
        datatype: bool
        paramtype: vlogdefine
    PITON_FPGA_ETHERNETLITE:
        datatype: bool
        paramtype: vlogdefine
    GENESYS2_BOARD:
        datatype: bool
        paramtype: vlogdefine
    NEXYSVIDEO_BOARD:
        datatype: bool
        paramtype: vlogdefine
    VC707_BOARD:
        datatype: bool
        paramtype: vlogdefine
    VCU118_BOARD:
        datatype: bool
        paramtype: vlogdefine
    XUPP3R_BOARD:
        datatype: bool
        paramtype: vlogdefine
    F1_BOARD:
        datatype: bool
        paramtype: vlogdefine
    INTEL_S10GX_BOARD:
        datatype: bool
        paramtype: vlogdefine
